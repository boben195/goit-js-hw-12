{"version":3,"file":"commonHelpers.js","sources":["../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nimport axios from \"axios\";\n\n//const BASE_URL = \"https://pixabay.com/api/\";\nconst API_KEY = \"42039284-aa75c07fa754230e40c75f28c\";\n\nconst btn = document.querySelector(\".btn\");\nconst form = document.querySelector(\".foto-form\");\nconst list = document.querySelector(\".gallery\");\nconst loader = document.querySelector(\".loader\");\nconst loadBtn = document.querySelector(\".btn-load\");\n\nloadBtn.style.display = 'none';\n//************************ */\naxios.defaults.baseURL = 'https://pixabay.com/api';\nlet page = 1;\nlet query = \"\";\nlet max = 0;\n\n/*************************************** */\n\n\nform.addEventListener('submit', handleSearch);\n\nasync function handleSearch(event) {\n  event.preventDefault();\n  list.innerHTML = \"\";\n  page = 1;\n  loadBtn.style.display = 'block';\n  query = form.query.value.trim();\n  if (!query) {\n    createMessage(`The search field can't be empty! Please, enter your request!`);\n    loadBtn.style.display = 'none';\n    return;\n  }\n  try {\n    const { hits, total } = await getPictures(query);\n    max = Math.ceil(total / 15);\n    createList(hits, list);\n    if (hits.length > 0) {\n      loadBtn.addEventListener(\"click\", handleLoad);\n    } else {\n      loadBtn.style.display = 'block';\n      createMessage(`Sorry, there are no images matching your search query. Please, try again!`);\n    };\n  \n    showLoader(false);\n  } catch (error) {\n        iziToast.error({\n        title: 'ERROR',\n        message: `❌ Ooopsi Doopsi ${error}`,\n      });\n  } finally {\n    form.reset();\n    if (page === max) {\n      loadBtn.style.display = 'block';\n      createMessage(\"We're sorry, but you've reached the end of search results!\");\n    };\n  };\n};\n/*************************************************** */\nasync function handleLoad() {\n  page++;\n  try {\n    showLoader(true);\n    loadBtn.style.display = 'block';\n    const { hits } = await getPictures(query, page);\n    createList(hits, list);\n    showLoader(false);\n  } catch (error) {\n        iziToast.error({\n        title: 'ERROR',\n        message: `❌ Ooopsi Doopsi ${error}`,\n      });\n  } finally {\n    if (page === max) {\n      loadBtn.style.display = 'block';\n      createMessage(\"We're sorry, but you've reached the end of search results!\");\n    };\n  };\n};\n\nasync function getPictures(query, page = 1) {\n  showLoader(true);\n  return axios\n    .get(\"/\", {\n      params: {\n        key: API_KEY,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: 15,\n        page,\n      },\n    })\n    .then(({ data }) => data);\n}\n\n\n function createList(hits) {\n  const markup = hits\n    .map(\n      ({\n        webformatURL, largeImageURL, tags, likes, views, comments, downloads, }) =>\n        `<li class=\"gallery-item\">\n        <a class=\"gallery-link\" href=\"${largeImageURL}\">\n        <img class=\"gallery-image\" src=\"${webformatURL}\" alt=\"${tags}\"/>\n        <p class=\"gallery-text\">Likes: ${likes} Views: ${views} Comments: ${comments} Downloads: ${downloads}</p>\n        </a>\n        </li>`)\n     .join('');\n     list.insertAdjacentHTML(\"beforeend\", markup)\n      simplyGallery.refresh();\n}\n\n      const simplyGallery = new SimpleLightbox('.gallery-item a', {\n        captionsData: 'alt',\n        captionDelay: 250,\n      });\n\n      function createMessage(message) {\n        iziToast.show({\n        message: message,\n        close: false,\n       closeOnClick: true,\n    });\n}\n\nfunction showLoader(state = true) {\n  loader.classList.add('loader')\n  loader.style.display = !state ? 'none' : 'inline-block';\n  btn.disabled = state;\n}\n\nloader.classList.remove('loader')\n\nfunction scrollImg() {\n  const rect = document.querySelector('.gallery-link').getBoundingClientRect();\n  window.scrollBy({ top: rect.height * 2, left: 0, behavior: 'smooth' });\n}\n\n\n/************************************************************************************ */\n\n\n\n"],"names":["API_KEY","btn","form","list","loader","loadBtn","axios","page","query","max","handleSearch","event","createMessage","hits","total","getPictures","createList","handleLoad","showLoader","error","iziToast","data","markup","webformatURL","largeImageURL","tags","likes","views","comments","downloads","simplyGallery","SimpleLightbox","message","state"],"mappings":"+vBASA,MAAMA,EAAU,qCAEVC,EAAM,SAAS,cAAc,MAAM,EACnCC,EAAO,SAAS,cAAc,YAAY,EAC1CC,EAAO,SAAS,cAAc,UAAU,EACxCC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAU,SAAS,cAAc,WAAW,EAElDA,EAAQ,MAAM,QAAU,OAExBC,EAAM,SAAS,QAAU,0BACzB,IAAIC,EAAO,EACPC,EAAQ,GACRC,EAAM,EAKVP,EAAK,iBAAiB,SAAUQ,CAAY,EAE5C,eAAeA,EAAaC,EAAO,CAMjC,GALAA,EAAM,eAAc,EACpBR,EAAK,UAAY,GACjBI,EAAO,EACPF,EAAQ,MAAM,QAAU,QACxBG,EAAQN,EAAK,MAAM,MAAM,KAAI,EACzB,CAACM,EAAO,CACVI,EAAc,8DAA8D,EAC5EP,EAAQ,MAAM,QAAU,OACxB,MACD,CACD,GAAI,CACF,KAAM,CAAE,KAAAQ,EAAM,MAAAC,CAAK,EAAK,MAAMC,EAAYP,CAAK,EAC/CC,EAAM,KAAK,KAAKK,EAAQ,EAAE,EAC1BE,EAAWH,EAAMV,CAAI,EACjBU,EAAK,OAAS,EAChBR,EAAQ,iBAAiB,QAASY,CAAU,GAE5CZ,EAAQ,MAAM,QAAU,QACxBO,EAAc,2EAA2E,GAG3FM,EAAW,EAAK,CACjB,OAAQC,EAAP,CACIC,EAAS,MAAM,CACf,MAAO,QACP,QAAS,mBAAmBD,GACpC,CAAO,CACP,QAAY,CACRjB,EAAK,MAAK,EACNK,IAASE,IACXJ,EAAQ,MAAM,QAAU,QACxBO,EAAc,4DAA4D,GAGhF,CAEA,eAAeK,GAAa,CAC1BV,IACA,GAAI,CACFW,EAAW,EAAI,EACfb,EAAQ,MAAM,QAAU,QACxB,KAAM,CAAE,KAAAQ,CAAI,EAAK,MAAME,EAAYP,EAAOD,CAAI,EAC9CS,EAAWH,EAAMV,CAAI,EACrBe,EAAW,EAAK,CACjB,OAAQC,EAAP,CACIC,EAAS,MAAM,CACf,MAAO,QACP,QAAS,mBAAmBD,GACpC,CAAO,CACP,QAAY,CACJZ,IAASE,IACXJ,EAAQ,MAAM,QAAU,QACxBO,EAAc,4DAA4D,GAGhF,CAEA,eAAeG,EAAYP,EAAOD,EAAO,EAAG,CAC1C,OAAAW,EAAW,EAAI,EACRZ,EACJ,IAAI,IAAK,CACR,OAAQ,CACN,IAAKN,EACL,EAAGQ,EACH,WAAY,QACZ,YAAa,aACb,WAAY,GACZ,SAAU,GACV,KAAAD,CACD,CACP,CAAK,EACA,KAAK,CAAC,CAAE,KAAAc,CAAM,IAAKA,CAAI,CAC5B,CAGC,SAASL,EAAWH,EAAM,CACzB,MAAMS,EAAST,EACZ,IACC,CAAC,CACC,aAAAU,EAAc,cAAAC,EAAe,KAAAC,EAAM,MAAAC,EAAO,MAAAC,EAAO,SAAAC,EAAU,UAAAC,CAAY,IACvE;AAAA,wCACgCL;AAAA,0CACED,WAAsBE;AAAA,yCACvBC,YAAgBC,eAAmBC,gBAAuBC;AAAA;AAAA,cAErF,EACR,KAAK,EAAE,EACR1B,EAAK,mBAAmB,YAAamB,CAAM,EAC1CQ,EAAc,QAAO,CAC3B,CAEM,MAAMA,EAAgB,IAAIC,EAAe,kBAAmB,CAC1D,aAAc,MACd,aAAc,GACtB,CAAO,EAED,SAASnB,EAAcoB,EAAS,CAC9BZ,EAAS,KAAK,CACd,QAASY,EACT,MAAO,GACR,aAAc,EACrB,CAAK,CACL,CAEA,SAASd,EAAWe,EAAQ,GAAM,CAChC7B,EAAO,UAAU,IAAI,QAAQ,EAC7BA,EAAO,MAAM,QAAW6B,EAAiB,eAAT,OAChChC,EAAI,SAAWgC,CACjB,CAEA7B,EAAO,UAAU,OAAO,QAAQ"}